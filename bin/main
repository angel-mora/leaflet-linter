#!/usr/bin/env ruby
# frozen_string_literal: true

# Conditions

ERROR = [{ js: 'Layer out of layer.control in line' },
         { html: 'Content inside script detected.
            Add src to script tag and relocate code.
            Example: /js/script_relocated.js' }].freeze

WARNING = 'The file is bigger than 5mb. Compression suggested. Try https://mapshaper.org/'

# Test example

no_offenses_report = [{ 'Files inspected': 3 },
               { 'Offenses': 2 },
               { 'Path': 'index.html' },
               { 'Warning': 0 },
               { 'Error': 0 }]

def offense_details(offense)
    offense_details = []
    total_offenses = 0
    if offense
        offense_details << String.new "#{path}: #{line_row}: #{ERROR}"
end

def final_report(report)
    case report
    when report[3]['Warning'] = 0 && report[4]['Error'] = 0
        p "Inspecting #{report[0]['Files inspected']} files"
        p 'No offenses detected'
    when report[3]['Warning'] > 0 || report[4]['Error'] > 0
        p "Inspecting #{report[0]['Files inspected']} files"
        p "#{total_offenses} detected"
        p offense_details.each
end
